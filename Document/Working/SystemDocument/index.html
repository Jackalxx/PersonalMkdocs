
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="http://localhost/doc/Document/Working/SystemDocument/">
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>AccountInboxæ©Ÿåˆ¶æ›´æ–° - CPS MKdocs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/customize.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#accountinbox" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="CPS MKdocs" class="md-header__button md-logo" aria-label="CPS MKdocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CPS MKdocs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              AccountInboxæ©Ÿåˆ¶æ›´æ–°
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="CPS MKdocs" class="md-nav__button md-logo" aria-label="CPS MKdocs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    CPS MKdocs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Document
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Document
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Example
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Example
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Publish/Example/SystemDocument/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Publish document
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      èƒŒæ™¯
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      ç•¶å‰ç³»çµ±ç‹€æ³
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ç•¶å‰è³‡æ–™æµèˆ‡çµæ§‹
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ç•¶å‰è³‡æ–™æµèˆ‡çµæ§‹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      äº‹ä»¶è§¸ç™¼
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message" class="md-nav__link">
    <span class="md-ellipsis">
      å¾Œå°æ–°å¢Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      APIå‘¼å«
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      ç™»å…¥æ™‚è£œé€
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox" class="md-nav__link">
    <span class="md-ellipsis">
      æ–°å¢Inbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_1" class="md-nav__link">
    <span class="md-ellipsis">
      è®€å–Inbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_2" class="md-nav__link">
    <span class="md-ellipsis">
      å–Inboxæœªè®€
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#db-tableaccountinbox" class="md-nav__link">
    <span class="md-ellipsis">
      DB Table:ACCOUNTINBOX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#elk-indexcps-account-inbox" class="md-nav__link">
    <span class="md-ellipsis">
      ELK Index:cps-account-inbox
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      ç•¶å‰æ•ˆèƒ½å•é¡Œ
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      æ”¹å–„æ–¹å‘
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      æ–°æµç¨‹è®Šæ›´æ¦‚è¦
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      æ–°æµç¨‹
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ–°æµç¨‹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      äº‹ä»¶è§¸ç™¼
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message_1" class="md-nav__link">
    <span class="md-ellipsis">
      å¾Œå°æ–°å¢Message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api_1" class="md-nav__link">
    <span class="md-ellipsis">
      APIå‘¼å«
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ç™»å…¥æ™‚è£œé€
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_3" class="md-nav__link">
    <span class="md-ellipsis">
      æ–°å¢Inbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_4" class="md-nav__link">
    <span class="md-ellipsis">
      è®€å–Inbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_5" class="md-nav__link">
    <span class="md-ellipsis">
      å–Inboxæœªè®€
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      æ–°æµç¨‹è³‡æ–™çµæ§‹
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æ–°æµç¨‹è³‡æ–™çµæ§‹">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#db-table-accountinbox" class="md-nav__link">
    <span class="md-ellipsis">
      DB Table: ACCOUNTINBOX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafka-topiccps-account-inbox-customize-content" class="md-nav__link">
    <span class="md-ellipsis">
      Kafka Topic:cps-account-inbox-customize-content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_2" class="md-nav__link">
    <span class="md-ellipsis">
      æä¾›API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="æä¾›API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#list" class="md-nav__link">
    <span class="md-ellipsis">
      å–List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inbox_6" class="md-nav__link">
    <span class="md-ellipsis">
      è®€Inbox
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api_3" class="md-nav__link">
    <span class="md-ellipsis">
      éœ€æ±‚API
    </span>
  </a>
  
    <nav class="md-nav" aria-label="éœ€æ±‚API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diinbox-content" class="md-nav__link">
    <span class="md-ellipsis">
      DIå–Inbox Content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      å¾ŒçºŒè¦åŠƒ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="å¾ŒçºŒè¦åŠƒ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-inbox" class="md-nav__link">
    <span class="md-ellipsis">
      1. åƒæ•¸åŒ–å®¢åˆ¶Inbox
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. åƒæ•¸åŒ–å®¢åˆ¶Inbox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#db-table-accountinbox-elk-indexcps-account-inbox" class="md-nav__link">
    <span class="md-ellipsis">
      DB Table: ACCOUNTINBOX &amp; ELK Index:cps-account-inbox
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kafka-topiccps-account-inbox-customize-content_1" class="md-nav__link">
    <span class="md-ellipsis">
      Kafka Topic:cps-account-inbox-customize-content
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-api" class="md-nav__link">
    <span class="md-ellipsis">
      2. ç›¸é—œæœå‹™&amp;API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    <span class="md-ellipsis">
      3. æ’ç¨‹è™•ç†æ©Ÿåˆ¶
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      ä¸Šç·šå¾Œ
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ä¸Šç·šå¾Œ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      è³‡æ–™é‡è®ŠåŒ–
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="accountinbox">AccountInboxæ©Ÿåˆ¶æ›´æ–°</h1>
<h2 id="_1">èƒŒæ™¯</h2>
<p>2025/3/23æ™‚ç™¼ç”ŸDataCenteræœå‹™é »å¯¬ç”¨ç›¡ï¼Œå°è‡´ç³»çµ±å‘¼å«timeoutã€‚<br />
ç¶“ç›¤é»å¾Œç¢ºèªAccountInfoæœå‹™æ¶ˆè€—å¤§é‡DIå­˜å–çš„é »å¯¬ã€‚<br />
å› æ‡‰æ­¤äº‹ä»¶èˆ‡å…¬å¸ELKå°‡æ–¼æœªä¾†ä¸‹æ¶ï¼Œå› æ­¤ç›¤é»AccountInfoçš„ä½¿ç”¨èˆ‡å‘¼å«ï¼Œä¸¦è¨­è¨ˆå„ªåŒ–æµç¨‹ã€‚  </p>
<h2 id="_2">ç•¶å‰ç³»çµ±ç‹€æ³</h2>
<p>å®šå‹åŒ–ç«™å…§é€šçŸ¥ä¿¡(InboxType &gt; 0)<br />
å¦‚æœ‰åƒæ•¸ï¼Œå°‡åƒæ•¸å­˜msgæ¬„ä½ï¼Œæ¨™é¡Œä»¥I18Nè³‡æºæª”Keyå€¼å½¢å¼å­˜æ–¼Titleæ¬„ä½<br />
å…§æ–‡èˆ‡æ¨™é¡Œçš„å…§å®¹éƒ½ç´€éŒ„æ–¼I18Nè³‡æºæª”ä¸­(message.en.property)<br />
*è¨»å†Šé€šçŸ¥æœ‰ç›´æ¥å¯«å…¥æ¨™é¡Œå…§æ–‡çš„æƒ…å¢ƒï¼Œé ˆç›¤é»  </p>
<p>InboxType &lt; 0 (ç›®å‰åƒ…æœ‰-1)<br />
ç›®å‰ä¸»è¦åˆ†å…©å¡Šç™¼é€ï¼šå¾Œå°æ¨é€ã€ç›´æ¥å‘¼å«å¯«å…¥ï¼ŒInboxTypeéƒ½æœƒå¯«å…¥-1<br />
å¾Œå°æ¨é€æœƒå…ˆç”Ÿæˆä¸€ç­†Messageè³‡æ–™è¡¨æ¬„ä½ï¼Œä¸¦åœ¨æ–°å¢AccountInboxè³‡æ–™æ™‚å°‡Message.Idå¯«å…¥Inbox.MessageIdæ¬„ä½<br />
APIç›´æ¥å‘¼å«ä¸æœƒæœ‰Inbox.MessageIdï¼Œç›®å‰åƒ…æœ‰Luckyspinå‘¼å«  </p>
<p>ç¶“ç›¤é»ï¼Œç›®å‰ç©å®¶æœ‰å…©å€‹æƒ…å¢ƒæœƒå¢åŠ Inboxæ¶ˆè€—è³‡æº  </p>
<ol>
<li>
<p>é»æ“Šç•«é¢å³ä¸Šè§’çš„ä¿¡ç®±<br />
  æ­¤æ™‚æœƒå‘¼å«æ­¤API  <br />
  https://{{WebsiteDomainName}}/api/bt/v1/user/getInboxFromDC<br />
  è€Œæ­¤APIä¸­å°‡åŸ·è¡Œä»¥ä¸‹æ“ä½œ  </p>
<ol>
<li>ç›´æ¥å¾DIæ’ˆå–è³‡æ–™   </li>
<li>å¾ELKæ’ˆå–InboxIdå°æ‡‰çš„MessageData<br />
å…¶ä¸­ä¸åŒ…å«å¿«å–æ©Ÿåˆ¶ï¼Œå› æ­¤æ¯æ¬¡é»æ“Šéƒ½æœƒé€ æˆDIèˆ‡ELKçš„è³‡æºæ¶ˆè€—ã€‚    </li>
</ol>
</li>
<li>
<p>ç™»å…¥æ™‚å°‡æª¢æŸ¥éå»ä¸€å€‹æœˆæ˜¯å¦æœ‰æœªæ”¶åˆ°çš„ç³»çµ±MESSAGEï¼Œä¸¦å³æ™‚å°‡å…§å®¹æ¨ä¸ŠELK  </p>
</li>
</ol>
<h2 id="_3">ç•¶å‰è³‡æ–™æµèˆ‡çµæ§‹</h2>
<h3 id="_4">äº‹ä»¶è§¸ç™¼</h3>
<pre class="mermaid"><code>graph LR
  Trigger[ç³»çµ±è§¸ç™¼é€Inbox&lt;br&gt;ex: å„²å€¼æˆåŠŸ] --&gt; SetType[æ ¹æ“šè§¸ç™¼æƒ…å¢ƒè¨­ç½®InboxType] --&gt; InsertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°];</code></pre>
<h3 id="message">å¾Œå°æ–°å¢Message</h3>
<pre class="mermaid"><code>graph TB
  NewMessage[å¾Œå°æ–°å¢Message&lt;br&gt;ç™¼é€é¡åˆ¥ç‚ºMember] 
  --&gt; SetType[è¨­ç½®InboxTypeç‚º-1] 
  --&gt; SetTitle[å°‡Inbox.Titleè¨­ç½®ç‚ºMessageæ¨™é¡Œ]
  --&gt; Loop[é€ç­†è™•ç†ç™¼é€å°è±¡] 
  --&gt; ReceiverOnline{æ”¶ä»¶è€…åœ¨ç·š}
  --æ˜¯--&gt; InsertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°] 
  --&gt; ReceiverLeft{é‚„æœ‰æ”¶ä»¶è€…}
  --å¦--&gt;End[çµæŸ];

  ReceiverOnline --å¦--&gt; Skip[è·³é] --&gt; ReceiverLeft;
  ReceiverLeft--æ˜¯--&gt;Loop;</code></pre>
<h3 id="api">APIå‘¼å«</h3>
<pre class="mermaid"><code>graph TB
  ApiCall[APIå‘¼å«&lt;br&gt;ç›®å‰åƒ…æœ‰LuckySpin] 
  --&gt; SetType[è¨­ç½®InboxTypeç‚º-1] 
  --&gt; SetTitle[æ ¹æ“šRequestè¨­ç½®Titleèˆ‡MSG]
  --&gt; Loop[é€ç­†è™•ç†ç™¼é€å°è±¡] 
  --&gt; InsertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°] 
  --&gt; ReceiverLeft{é‚„æœ‰æ”¶ä»¶è€…}
  --å¦--&gt;End[çµæŸ];
  ReceiverLeft--æ˜¯--&gt;Loop;</code></pre>
<h3 id="_5">ç™»å…¥æ™‚è£œé€</h3>
<pre class="mermaid"><code>graph TB
  Login[ç™»å…¥] 
  --&gt; ReadMessage[æª¢æŸ¥éå»30å¤©æ˜¯å¦æœ‰Message]  
  --&gt; Loop[é€ç­†è™•ç†Message] 
  --&gt; HasInbox{æ˜¯å¦å·²åœ¨InboxList}
  --å¦--&gt; SetInboxFromMessage[è¨­ç½®InboxType=-1&lt;br&gt;æ ¹æ“šMessageè¨­ç½®Inbox.Title, &lt;br&gt;Inbox.Message, Inbox.MessageID] 
  --&gt; InsertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°] 
  --&gt; MessageLeft{é‚„æœ‰Message}
  --å¦--&gt;End[çµæŸ];
  MessageLeft--æ˜¯--&gt;Loop;
</code></pre>
<h3 id="inbox">æ–°å¢Inbox</h3>
<pre class="mermaid"><code>graph TB
  NewInbox[æ–°å¢Inbox] --&gt; CheckType{InboxType&gt;0};
  CheckType --&gt;|æ˜¯&lt;br&gt;ä»£è¡¨æ¨£æ¿åŒ–é€šçŸ¥ä¿¡| HasParameter{æ˜¯å¦å‚³å…¥åƒæ•¸};
  HasParameter --&gt;|æ˜¯| WriteMSG[Inbox.Messageå¯«å…¥JsonåŒ–çš„åƒæ•¸];
  HasParameter --&gt;|å¦| MSGNull[Inbox.Messageç‚ºnull];
  MSGNull --&gt; Template[æ ¹æ“šInboxTypeæ‰¾å‡ºTemplateå®šç¾©æª”, å°‡æ¨™é¡ŒKeyå€¼å¯«å…¥Inbox.Title];
  WriteMSG --&gt; Template;
  Template --&gt; End;

  End--&gt; ELK_Active{æ˜¯å¦é–‹å•ŸELK?};
  ELK_Active --&gt; |æ˜¯|WriteELK[å¯«å…¥ELK];

  CheckType --&gt; |å¦&lt;br&gt;ä»£è¡¨å®¢è£½åŒ–è¨Šæ¯| FromMessage{æ˜¯å¦ä¾†è‡ªå¾Œå°æ¨é€};
  FromMessage --&gt; |æ˜¯| WriteMessageId[å°‡å°æ‡‰çš„Message.Idå¯«å…¥Inbox.MessageIdæ¬„ä½];
  FromMessage --&gt; |å¦| ELK_Active2{æ˜¯å¦é–‹å•ŸELK?};
  WriteMessageId --&gt; ELK_Active2;
  ELK_Active2 --&gt; |æ˜¯| MSGNull2[å°‡Inbox.Messageæ¬„ä½è¨­ç‚ºNull&lt;br&gt;å¯«å…¥ELKçš„ä¿ç•™åŸæ¨£];
  ELK_Active2--&gt; |å¦| End[å¯«å…¥ä¸€ç­†AccountInbox];
  MSGNull2--&gt; End;</code></pre>
<h3 id="inbox_1">è®€å–Inbox</h3>
<pre class="mermaid"><code>graph TB
  ReadInbox[è®€å–Inbox] 
  --&gt; ReadFromDC[å¾DCå–Inboxè³‡æ–™]
  --&gt; CheckType{InboxType&gt;0}
  --&gt;|æ˜¯&lt;br&gt;ä»£è¡¨æ¨£æ¿åŒ–é€šçŸ¥ä¿¡| ReadTemplate[æ ¹æ“šç”¨æˆ¶Languageèˆ‡InboxTypeå¾å¤šèªç³»è³‡æºæª”ä¸­å–å¾—æ¨™é¡Œèˆ‡å…§æ–‡]
  --&gt; HasNSG{Inbox.Messageæœ‰å€¼?} 
  --&gt; |å¦| End[é¡¯ç¤ºè³‡æ–™]; 

  HasNSG 
  --&gt; |æ˜¯| FillParameter[å°‡Inbox.Messageå…§å®¹è½‰ç‚ºå­—ä¸²å¡«å…¥å…§æ–‡]
  --&gt; End;  

  CheckType 
  --&gt;|å¦&lt;br&gt;ä»£è¡¨å®¢è£½åŒ–é€šçŸ¥ä¿¡| EnableELK{æ˜¯å¦å•Ÿç”¨ELK?}
  --&gt; |å¦| End;  

  EnableELK 
  --&gt; |æ˜¯| ReadContentFromELK[å¾ELKå–å¾—Inbox.Message]
  --&gt; End;  </code></pre>
<h3 id="inbox_2">å–Inboxæœªè®€</h3>
<pre class="mermaid"><code>graph TB
  Entry[å–æœªè®€];
  CheckCache{Cacheæœ‰è³‡æ–™};
  End[é¡¯ç¤ºè³‡æ–™];  
  QueryDB[å¾DBæ’ˆå–æœªè®€æ•¸];
  QueryELK[å¾ELKæ’ˆå–æœªè®€æ•¸];
  WriteCache[å¯«å…¥Cache&lt;br&gt;10ç§’];
  UseElk{å•Ÿç”¨ELK};

  Entry --&gt; CheckCache;
  CheckCache --æ˜¯--&gt; End;
  CheckCache --å¦--&gt; UseElk;
  UseElk --æ˜¯--&gt; QueryELK;
  UseElk --å¦--&gt; QueryDB;
  QueryDB --&gt; WriteCache;
  QueryELK --&gt; WriteCache;
  WriteCache --&gt; End;  </code></pre>
<h3 id="db-tableaccountinbox">DB Table:ACCOUNTINBOX</h3>
<table>
<thead>
<tr>
<th>UserId</th>
<th>InboxType</th>
<th>Title</th>
<th>Message</th>
<th>MessageId</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["$200.00"]</td>
<td>-1</td>
</tr>
<tr>
<td>B</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["â‚¹150.56"]</td>
<td>-1</td>
</tr>
<tr>
<td>A</td>
<td>-1</td>
<td>Special Promotion!</td>
<td></td>
<td>1234</td>
</tr>
<tr>
<td>B</td>
<td>-1</td>
<td>Special Promotion!</td>
<td></td>
<td>1234</td>
</tr>
</tbody>
</table>
<h3 id="elk-indexcps-account-inbox">ELK Index:cps-account-inbox</h3>
<table>
<thead>
<tr>
<th>UserId</th>
<th>InboxType</th>
<th>Title</th>
<th>Message</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["$200.00"]</td>
</tr>
<tr>
<td>B</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["â‚¹150.56"]</td>
</tr>
<tr>
<td>A</td>
<td>-1</td>
<td>Special Promotion!</td>
<td>ğŸ® Ready to Level Up? Join Our Epic Gaming Event! ğŸ•¹ï¸ Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: ğŸ’¥ Event Dates: [Insert dates here] ğŸ’ Grand Prizes: Rare skins, in-game currency, and exclusive gear! ğŸ”¥ Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming howdown. Donâ€™t miss outâ€”your chance to win starts [insert start time]!</td>
</tr>
<tr>
<td>B</td>
<td>-1</td>
<td>Special Promotion!</td>
<td>ğŸ® Ready to Level Up? Join Our Epic Gaming Event! ğŸ•¹ï¸ Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: ğŸ’¥ Event Dates: [Insert dates here] ğŸ’ Grand Prizes: Rare skins, in-game currency, and exclusive gear! ğŸ”¥ Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming showdown. Donâ€™t miss outâ€”your chance to win starts [insert start time]!</td>
</tr>
</tbody>
</table>
<h2 id="_6">ç•¶å‰æ•ˆèƒ½å•é¡Œ</h2>
<ol>
<li>é€éå¾Œå°æ¨é€å¤§é‡Inboxæ™‚ï¼Œæ¨é€çš„æ”¶ä»¶è€…æ¯äººéƒ½æœƒåœ¨ELKä¸Šä¿ç•™ä¸€ä»½ç›¸åŒçš„å…§æ–‡ã€‚  </li>
<li>è®€å–ä¿¡ä»¶æ™‚ï¼ŒæœƒåŒæ™‚åˆ°DCå’ŒELKè®€å–ï¼Œä¸¦ä¸”ä¸€æ¬¡è®€å–å…¨æ–‡å‡ºä¾†ã€‚</li>
<li>æŸ¥è©¢æœªè®€æ•¸æ™‚ï¼Œåªç•™10ç§’å¿«å–ï¼Œå¹¾ä¹ç­‰åŒæ–¼å®¢æˆ¶æ¯æ¬¡é»æ“Šé¸å–®ç•«é¢éƒ½æœƒé€²è¡ŒDBæ“ä½œã€‚  </li>
</ol>
<h2 id="_7">æ”¹å–„æ–¹å‘</h2>
<ol>
<li>èª¿æ•´AccountInboxè³‡æ–™çµæ§‹<br />
  å°‡AccountInboxçš„Contentèˆ‡ä¸»è¡¨æ‹†é–‹ï¼Œé¿å…å–®ä¸€Contenté‡è¤‡å„²å­˜æ–¼æ¯ç­†Inboxä¸­ã€‚  </li>
<li>æ”¹å–„è³‡æ–™è®€å–æµç¨‹
  å°‡UnreadCount, Previewç­‰åœ¨é»é–‹ä¿¡ä»¶å‰å°±æœƒçœ‹åˆ°çš„è³‡æ–™å–®ç¨æŠ½å‡ºã€‚<br />
  é»é–‹ä¿¡ä»¶æ‰å–Contentã€‚ </li>
<li>å»ºç«‹é©ç•¶çš„å¿«å–æ©Ÿåˆ¶ä»¥é¿å…é€ æˆè³‡æºæ¶ˆè€—<br />
  èª¿æ•´UnreadCountçš„å¿«å–æ©Ÿåˆ¶ï¼Œä¸å†é »ç¹å¾DBæˆ–ELKæ’ˆå–è³‡æ–™ã€‚  </li>
</ol>
<h2 id="_8">æ–°æµç¨‹è®Šæ›´æ¦‚è¦</h2>
<ol>
<li>æ–°å¢Inbox Contentè¡¨èˆ‡å°æ‡‰çš„Kafka Topicã€‚  <ul>
<li>Inbox Contentå„²å­˜Title, Preview, MessageId, Countentç­‰è³‡æ–™ï¼Œä¸å„²å­˜æ”¶ä»¶è€…è³‡æ–™ã€‚  </li>
</ul>
</li>
<li>å®¢åˆ¶åŒ–è¨Šæ¯ä¸€å¾‹å…ˆå»ºç«‹Contentã€‚  <ul>
<li>Inboxå…§åªç´€éŒ„Content Idä»¥åŒ¹é…è³‡æ–™ï¼Œé¿å…åŒä¸€è¨Šæ¯ä½”ç”¨å¤šç­†è³‡æ–™ã€‚  </li>
</ul>
</li>
<li>å–å¾—ä¿¡ä»¶æœªè®€ã€å–å¾—ä¿¡ä»¶æ¸…å–®çš„å–è³‡æ–™æµç¨‹æ”¹å–„ã€‚<ul>
<li>æœªè®€æ•¸å„²å­˜æ–¼Redisï¼Œä¸¦ç›´æ¥åœ¨äº‹ä»¶è§¸ç™¼æ™‚èª¿æ•´Redisåƒæ•¸ã€‚<br />
  åƒ…åœ¨Reidsç„¡å€¼æ™‚å¾DIå–å¾—æœªè®€æ•¸å­˜å…¥Redisã€‚</li>
<li>å–æ¸…å–®æ™‚ç›´æ¥å¾DIå–Inbox List, å†æ ¹æ“šContent Idæ‰¾Previewè³‡æ–™ã€‚é»é–‹ä¿¡ä»¶æ™‚æ‰å–å®Œæ•´Inbox Contentã€‚  </li>
</ul>
</li>
</ol>
<h2 id="_9">æ–°æµç¨‹</h2>
<h3 id="_10">äº‹ä»¶è§¸ç™¼</h3>
<p>è§¸ç™¼å¾Œè¦æ ¹æ“šUserIdåŠ ç®—Redisæœªè®€æ•¸ã€‚<br />
èª¿æ•´æ–¼è§¸ç™¼æ–°å¢Inboxçš„äº‹ä»¶ä¸­, é¿å…å‘¼å«ç«¯è¦æª¢æŸ¥ã€‚  </p>
<h3 id="message_1">å¾Œå°æ–°å¢Message</h3>
<pre class="mermaid"><code>graph TB
  NewMsg[å¾Œå°æ–°å¢Message&lt;br&gt;ç™¼é€é¡åˆ¥ç‚ºMember] 
  --&gt; SetType[è¨­ç½®InboxTypeç‚º-2] 
  --&gt; NewSummary[æ ¹æ“šMessageè¨­ç½®Inbox Content] 
  --&gt; SetTitle[å°‡Inbox.Titleè¨­ç½®ç‚ºContent.Id]
  --&gt; Loop[é€ç­†è™•ç†ç™¼é€å°è±¡] 
  --&gt; Login{æ”¶ä»¶è€…åœ¨ç·š} 
  --æ˜¯--&gt; InsertInbox[å¯«å…¥Inbox] 
  --&gt; ReceiverLeft{é‚„æœ‰æ”¶ä»¶è€…}
  --å¦--&gt; End[çµæŸ];

  Login --å¦--&gt;ReceiverLeft;

  ReceiverLeft--æ˜¯--&gt;Loop;

  style SetType fill:#997700;
  style SetTitle fill:#997700;
  style NewSummary fill:#997700;
  style SetTitle fill:#997700;</code></pre>
<h3 id="api_1">APIå‘¼å«</h3>
<pre class="mermaid"><code>graph TB
  ApiCall[APIå‘¼å«&lt;br&gt;ç›®å‰åƒ…æœ‰LuckySpin] 
  --&gt; SetType[è¨­ç½®InboxTypeç‚º-2] 
  --&gt; NewSummary[æ ¹æ“šRequestè¨­ç½®Inbox Content]
  --&gt; SetTitle[å°‡Inbox.Titleè¨­ç½®ç‚ºContent.Id]
  --&gt; Loop[é€ç­†è™•ç†ç™¼é€å°è±¡]
  --&gt; InesertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°] 
  --&gt; ReceiverLeft{é‚„æœ‰æ”¶ä»¶è€…}
  --å¦--&gt; End[çµæŸ];

  ReceiverLeft--æ˜¯--&gt;Loop;

  style SetType fill:#997700;
  style SetTitle fill:#997700;
  style NewSummary fill:#997700;</code></pre>
<h3 id="_11">ç™»å…¥æ™‚è£œé€</h3>
<pre class="mermaid"><code>graph TB
  Login[ç™»å…¥] 
  --&gt; CheckMessage[å–å¾—éå»30å¤©çš„Messages]  
  --æ˜¯--&gt; Loop[é€ç­†è™•ç†Message] 
  --&gt; HasInbox{æ˜¯å¦å·²åœ¨&lt;br&gt;InboxList}
  --å¦--&gt; HasSummary{æ˜¯å¦å·²æœ‰&lt;br&gt;Inbox Content} 
  --å¦--&gt; SetSummary[è¨­ç½®InboxType=-2&lt;br&gt;æ ¹æ“šMessageå»ºç«‹Inbox Content] 
  --&gt; SetTitle[å°‡Content.Idå¯«å…¥inbox.Title]
  --&gt; InsertInbox[æ–°å¢Inbox&lt;br&gt;è¦‹å¾Œè¿°] 
  --&gt; MessageLeft{é‚„æœ‰&lt;br&gt;Message}
  --å¦--&gt; End[çµæŸ];  

  HasSummary --æ˜¯--&gt; InsertFromSummary[æ ¹æ“šContentæ–°å¢Inbox] --&gt; InsertInbox;

  HasInbox --æ˜¯--&gt;MessageLeft;
  MessageLeft--æ˜¯--&gt;Loop;

  style SetSummary fill:#997700;
  style SetTitle fill:#997700;
  style HasSummary fill:#997700;
  style InsertFromSummary fill:#997700;</code></pre>
<h3 id="inbox_3">æ–°å¢Inbox</h3>
<pre class="mermaid"><code>graph TB
  NewInbox[æ–°å¢Inbox] --&gt; CheckTpe{InboxType&gt;0}
  --&gt;|æ˜¯&lt;br&gt;ä»£è¡¨æ¨£æ¿åŒ–é€šçŸ¥ä¿¡| CheckParameter{æ˜¯å¦å‚³å…¥åƒæ•¸}
  --&gt;|æ˜¯| WriteMSG[MSGæ¬„ä½å¯«å…¥JsonåŒ–çš„åƒæ•¸]
  --&gt; Template[æ ¹æ“šInboxTypeæ‰¾å‡ºTemplateå®šç¾©æª”, å°‡æ¨™é¡ŒKeyå€¼å¯«å…¥Titleæ¬„ä½]
  --&gt; End[å¯«å…¥ä¸€ç­†AccountInbox];

  CheckParameter --&gt;|å¦| MSGNull[MSGæ¬„ä½null]
  --&gt; Template;

  CheckTpe 
  --&gt; |å¦&lt;br&gt;ä»£è¡¨å®¢è£½åŒ–è¨Šæ¯| FromMessage{æ˜¯å¦ä¾†è‡ªå¾Œå°æ¨é€}
  --&gt; |æ˜¯| WriteMessageId[å°‡å°æ‡‰çš„Message.Idå¯«å…¥MessageIdæ¬„ä½]
  --&gt; WriteKafka[å°‡è¨Šæ¯å…§å®¹å¯«è‡³Kafkaçš„Inbox Content]
  --&gt; PrepareSummary[å°‡å»ºç«‹å¥½çš„Content.Idå¯«å…¥Inbox.Title]
  --&gt; End;

  FromMessage --&gt; |å¦| WriteKafka;

  style PrepareSummary fill:#997700;
  style WriteKafka fill:#997700;</code></pre>
<h3 id="inbox_4">è®€å–Inbox</h3>
<pre class="mermaid"><code>graph TB
  ReadInbox[è®€å–Inbox] 
  --&gt; GetFromDC[å¾DCå–Inboxè³‡æ–™]
  --&gt; isNewFlow{inboxType=-2}
  --å¦--&gt; CurrentFlow[åŸæœ‰æµç¨‹&lt;br&gt;è©³è¦‹å‰æ–¹æ–‡ä»¶] 
  --&gt; UpdateUnread --&gt; ShowData[é¡¯ç¤ºè³‡æ–™];

  isNewFlow --æ˜¯--&gt;  GetFromKafka[å¾DIå–Inbox Content];
  GetFromKafka --&gt; UpdateUnread;

  UpdateUnread[æ›´æ–°Inboxæœªè®€è³‡è¨Š&lt;br&gt;æ›´æ–°Redisè¨ˆæ•¸];

  style isNewFlow fill:#997700;
  style GetFromKafka fill:#997700;
  style UpdateUnread fill:#997700;</code></pre>
<h3 id="inbox_5">å–Inboxæœªè®€</h3>
<pre class="mermaid"><code>graph TB
  Entry[å–æœªè®€];
  CheckRedis[ä»¥UserIdæŸ¥è©¢ç¢ºèªRedisæœ‰ç„¡æœªè®€è³‡æ–™];
  End[é¡¯ç¤ºè³‡æ–™];  
  QueryDB[å¾DBæ’ˆå–æœªè®€æ•¸];
  WriteRedis[å¯«å…¥Redis];

  Entry --&gt; CheckRedis;
  CheckRedis --æ˜¯--&gt; End;
  CheckRedis --å¦--&gt; QueryDB;
  QueryDB --&gt; WriteRedis;
  WriteRedis --&gt; End;

  style CheckRedis fill:#997700;
  style QueryDB fill:#997700;
  style WriteRedis fill:#997700;</code></pre>
<h2 id="_12">æ–°æµç¨‹è³‡æ–™çµæ§‹</h2>
<p>æ–°æµç¨‹ä¸­, DBèˆ‡Indexçš„è³‡æ–™çµæ§‹ä¸€è‡´</p>
<h3 id="db-table-accountinbox">DB Table: ACCOUNTINBOX</h3>
<table>
<thead>
<tr>
<th>UserId</th>
<th>InboxType</th>
<th>Title</th>
<th>Message</th>
<th>MessageId</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["$200.00"]</td>
<td>-1</td>
</tr>
<tr>
<td>B</td>
<td>2</td>
<td>msg.account_inbox.deposit.title</td>
<td>["â‚¹150.56"]</td>
<td>-1</td>
</tr>
<tr>
<td>A</td>
<td>-2</td>
<td>fee38b64-2dd0-4771-8c53-6cd81cb1bd38</td>
<td></td>
<td>1234</td>
</tr>
<tr>
<td>B</td>
<td>-2</td>
<td>fee38b64-2dd0-4771-8c53-6cd81cb1bd38</td>
<td></td>
<td>1234</td>
</tr>
</tbody>
</table>
<h3 id="kafka-topiccps-account-inbox-customize-content">Kafka Topic:cps-account-inbox-customize-content</h3>
<table>
<thead>
<tr>
<th>Id</th>
<th>Title</th>
<th>Preview</th>
<th>MessageId</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>fee38b64-2dd0-4771-8c53-6cd81cb1bd38</td>
<td>Special Promotion!</td>
<td>ğŸ® Ready to Level Up? Join Our Epic Gaming Event! ğŸ•¹ï¸</td>
<td>1234</td>
<td>ğŸ® Ready to Level Up? Join Our Epic Gaming Event! ğŸ•¹ï¸ Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: ğŸ’¥ Event Dates: [Insert dates here] ğŸ’ Grand Prizes: Rare skins, in-game currency, and exclusive gear! ğŸ”¥ Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming showdown. Donâ€™t miss outâ€”your chance to win starts [insert start time]!</td>
</tr>
</tbody>
</table>
<h2 id="api_2">æä¾›API</h2>
<h3 id="list">å–List</h3>
<p><a href="/BackendApibt/v2/user/getInboxList">è¦æ ¼é€£çµ</a><br />
æ›¿ä»£ç•¶å‰ä½¿ç”¨çš„ /api/bt/v1/user/getInboxFromDC<br />
å‚³å…¥å‚³å‡ºè¦æ ¼å¤§è‡´ä¸è®Šï¼Œåªæœ‰Messageè®Šæ›´ç‚º50å­—Preview  </p>
<p>ä¸¦æ–°å¢ContentIdæ¬„ä½, åœ¨inboxTypeç‚º-2æ™‚æœƒå›å‚³contentId<br />
ç›´æ¥å¾DBå–å¾—List, å¾DIå–å¾—Contentã€‚  </p>
<h3 id="inbox_6">è®€Inbox</h3>
<p><a href="/BackendApibt/v2/user/readInboxContent">è¦æ ¼é€£çµ</a><br />
å‚³å…¥inboxIdå–å¾—å®Œæ•´inboxå…§å®¹ï¼Œä¸¦æ›´æ–°readã€‚<br />
ç›´æ¥å¾DBå–å¾—Inbox, å¾DIå–å¾—Contentã€‚</p>
<h2 id="api_3">éœ€æ±‚API</h2>
<h3 id="diinbox-content">DIå–Inbox Content</h3>
<p>å‚³å…¥åƒæ•¸ï¼šContent Id , Content Id List , MessageId, èµ·è¨–æ—¥<br />
å›å‚³ï¼šä»¥GraphQLå½¢å¼å›å‚³æŒ‡å®šæ¬„ä½, é€šå¸¸ç‚ºSummaryæˆ–Content.  </p>
<h2 id="_13">å¾ŒçºŒè¦åŠƒ</h2>
<p>ä»¥ä¸‹æ–‡ä»¶<strong><em>èˆ‡æ­¤æ¬¡éœ€æ±‚ç„¡é—œ</em></strong>ï¼Œç‚ºç›¤é»å…§å®¹æ™‚ï¼Œæ•´ç†å‡ºçš„å¾ŒçºŒå¯å„ªåŒ–æ–¹å‘ã€‚</p>
<ol>
<li>åƒæ•¸åŒ–å®¢åˆ¶Inbox</li>
<li>ç›¸é—œæœå‹™&amp;API</li>
<li>æ’ç¨‹è™•ç†æ©Ÿåˆ¶</li>
</ol>
<h3 id="1-inbox">1. åƒæ•¸åŒ–å®¢åˆ¶Inbox</h3>
<p>ç›®å‰çš„å®¢åˆ¶è¨Šæ¯ï¼Œä¸¦ä¸æœƒè™•ç†è®Šæ•¸ï¼Œå„˜ç®¡æ˜¯é‡å°å¤§é‡å—çœ¾çš„ä¿ƒéŠ·ï¼Œä¹Ÿåªæ˜¯ç™¼åŒæ¨£çš„æ–‡å­—ã€‚<br />
åŒæ™‚ï¼Œå¦‚æœè¦é‡å°å€‹äººç™¼é€æœ‰å…§å®¹å·®ç•°çš„æ–‡å­—ï¼Œå°±å¾—å»ºç«‹å¤šç­† Contentã€‚<br />
é€™å°ç¶­é‹èˆ‡æ“ä½œä¸¦ä¸æ˜¯è‰¯å¥½çš„è¨­è¨ˆï¼Œå› æ­¤æ‡‰è©²è¦è¦åŠƒæ–°çš„åƒæ•¸åŒ–Inboxæ–¹å¼ã€‚</p>
<p>åƒæ•¸åŒ–å®¢åˆ¶Inboxï¼Œå°‡æŠŠåƒæ•¸ä¾ç…§{0}, {1}ç­‰æ¨£æ¿Inboxçš„æ ¼å¼å¯«å…¥å…§æ–‡ï¼Œä¸¦åŒæ¨£é™¤å­˜æ–¼AccountInboxçš„MSGæ¬„ä½ã€‚
å‚³é€åƒæ•¸åŒ–å®¢åˆ¶Inboxçš„è³‡æ–™è¦æ ¼ç¯„ä¾‹å¦‚ä¸‹ï¼š</p>
<h4 id="db-table-accountinbox-elk-indexcps-account-inbox">DB Table: ACCOUNTINBOX &amp; ELK Index:cps-account-inbox</h4>
<table>
<thead>
<tr>
<th>UserId</th>
<th>InboxType</th>
<th>Title</th>
<th>Message</th>
<th>MessageId</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>-2</td>
<td>7d61c7d0-9597-4e8d-b4c4-23bd67ef6683</td>
<td>["Jacob","$200.00"]</td>
<td>1234</td>
</tr>
<tr>
<td>B</td>
<td>-2</td>
<td>7d61c7d0-9597-4e8d-b4c4-23bd67ef6683</td>
<td>["Ben","â‚¹150.56"]</td>
<td>1234</td>
</tr>
</tbody>
</table>
<h4 id="kafka-topiccps-account-inbox-customize-content_1">Kafka Topic:cps-account-inbox-customize-content</h4>
<table>
<thead>
<tr>
<th>Id</th>
<th>Title</th>
<th>Preview</th>
<th>MessageId</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>7d61c7d0-9597-4e8d-b4c4-23bd67ef6683</td>
<td>You've Earned a Special Reward</td>
<td>Dear {0},Thank you for your recent purchase! We are</td>
<td>-1</td>
<td>Dear {0},Thank you for your recent purchase! We are thrilled to inform you that your spending has reached {1}, qualifying you for an exclusive reward.We truly appreciate your support and look forward to providing you with even more great experiences. Please stay tuned for details on how to claim your reward.If you have any questions, feel free to reach out. Enjoy your well-earned reward!</td>
</tr>
</tbody>
</table>
<h3 id="2-api">2. ç›¸é—œæœå‹™&amp;API</h3>
<p>æœ‰äº†åƒæ•¸åŒ–å®¢åˆ¶APIçš„æ©Ÿåˆ¶å¾Œï¼Œæˆ‘å€‘å¯ä»¥å†æä¾›æ›´å®Œå–„çš„æœå‹™ã€æ›´ç°¡ä¾¿åœ°å»ºç«‹åƒæ•¸åŒ–çš„å®¢åˆ¶è¨Šæ¯ã€‚</p>
<ul>
<li>
<p>å»ºç«‹å®¢è£½åŒ–Inboxç›¸é—œAPI<br />
  æä¾›å»ºç«‹Inbox Contentè³‡æ–™çš„APIï¼Œä¾›å¾ŒçºŒæ¨é€ä½¿ç”¨ã€‚ä¹ŸåŒ…å«é…å¥—çš„CRUDã€‚</p>
</li>
<li>
<p>å¾Œå°åŒ¯å…¥åƒæ•¸åŒ–åå–®<br />
  å¾Œå°MessageåŠŸèƒ½ï¼Œå°‡æä¾›åƒæ•¸åŒ–åå–®çš„åŒ¯å…¥æ©Ÿåˆ¶ã€‚å…ˆé¸æ“‡å·²äº‹å…ˆå»ºç«‹å¥½çš„Summryï¼Œå†åŒ¯å…¥åŒ…å«UserIdèˆ‡æ‰€éœ€åƒæ•¸çš„åå–®ã€‚
  å› ç‚ºæŒ‰ç…§èº«ä»½ç¾¤çµ„é¸æ“‡åå–®å°‡é›£ä»¥å–å¾—åƒæ•¸ï¼Œå› æ­¤åƒæ•¸åŒ–å®¢åˆ¶åå–®æ‡‰åªèƒ½é€éåå–®åŒ¯å…¥çš„æ–¹å¼ç™¼é€ã€‚</p>
</li>
<li>
<p>æ‰¹æ¬¡æ¨é€API<br />
æ¯”ç…§LuckySpinç›¸é—œç¨‹å¼å»ºç«‹æ‰¹æ¬¡æ¨é€çš„APIï¼Œä½†é ˆå‚³å…¥äº‹å…ˆå»ºç«‹å¥½çš„Inbox Content.Idï¼Œä»¥åŠå«åƒæ•¸çš„åå–®åˆ—è¡¨ã€‚</p>
</li>
</ul>
<h3 id="3">3. æ’ç¨‹è™•ç†æ©Ÿåˆ¶</h3>
<p>åœ¨å¾Œå°çš„MessageåŠŸèƒ½ï¼Œé‡å°InboxåŠ å…¥é–‹å§‹æ™‚é–“ã€‚ä¸¦å¯«æ’ç¨‹åœ¨æŒ‡å®šæ™‚é–“è™•ç†Inboxçš„ç™¼é€ã€‚<br />
æ­¤é …è¦åŠƒå¯ä»¥è®“ç‡Ÿé‹æ–¹åœ¨äº‹å‰å»ºç«‹æ¨é€è¨Šæ¯ä¸¦æ–¼æŒ‡å®šæ™‚é–“ç™¼é€ï¼Œä¹Ÿå¯ä»¥é¿å…å¾Œå°ä½¿ç”¨è€…æ–¼ç³»çµ±ç¹å¿™æ™‚æ®µæ¨é€å¤§é‡ä¿ƒéŠ·è¨Šæ¯ã€‚</p>
<h2 id="_14">ä¸Šç·šå¾Œ</h2>
<h3 id="_15">è³‡æ–™é‡è®ŠåŒ–</h3>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": [], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>