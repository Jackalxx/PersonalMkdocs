{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u95dc\u65bc\u6b64\u5c08\u6848","text":"<p>\u500b\u4eba\u77e5\u8b58\u5eab\u7684\u61f6\u4eba\u914d\u7f6e, \u4f7f\u7528mkdocs\u7ba1\u7406, \u4e26\u4f7f\u7528docker\u6216github pages\u767c\u5e03\u3000\u3000</p>"},{"location":"#_2","title":"\u5982\u4f55\u4f7f\u7528","text":"<ol> <li>\u5728docs/Document/Publish\u5e95\u4e0b\u653e\u4f60\u60f3\u8981\u7684\u76ee\u9304\u7d50\u69cb\u548cmd\u6a94\u6848, \u5c08\u6848\u6703\u9810\u8a2d\u5c07\u6b64\u76ee\u9304\u4e0b\u7684\u6587\u4ef6\u90fd\u653e\u4e0a\u7db2\u7ad9  </li> <li>\u5982\u679c\u4f60\u60f3\u653e\u5176\u4ed6\u76ee\u9304, \u67e5\u4e00\u4e0bmkdocs.yml\u7684\u5beb\u6cd5\u7136\u5f8c\u4efb\u610f\u8abf\u6574  </li> <li>\u78ba\u4fdd\u4f60\u6709\u5b89\u88dd\u597dpython, docker\u7b49\u670d\u52d9  </li> </ol>"},{"location":"#docker","title":"Docker\u767c\u5e03","text":"<ol> <li>\u5728cmd window\u5167\u57f7\u884cdocker-compose up\u6307\u4ee4  </li> <li>\u53ef\u4ee5\u642d\u914d\u500b\u4eba\u7c21\u6613nginx\u5c07/doc\u8def\u5f91\u5c0d\u61c9\u5230\u5916\u90e8, \u4e0d\u7528\u66b4\u9732port  </li> </ol>"},{"location":"#github-page","title":"Github Page\u767c\u5e03","text":"<ol> <li>\u78ba\u8a8d\u4f60\u6709\u8a2d\u5b9a\u597dgithub page\u8cc7\u8a0a  <ul> <li>\u524d\u5f80\u4f60\u7684 GitHub \u5c08\u6848\u9801\u9762  </li> <li>\u9ede\u9078\u300cSettings\u300d\u2192\u300cPages\u300d  </li> <li>\u5efa\u7acbPublish \u5206\u652f, \u4e26\u5728\u300cSource\u300d\u4e2d\u9078\u64c7 Publish\uff0c\u9078\u64c7\u7db2\u9801\u7684\u6839\u76ee\u9304\uff08/(root)\uff09  </li> </ul> </li> <li>\u8a2d\u5b9aaction\u5141\u8a31workflow\u5beb\u5165  </li> <li>\u5c07deploy.yml\u653e\u7f6e\u5230 .github/workflows\u8cc7\u6599\u593e\u4e2d (\u5982\u679c\u539f\u672c\u6c92\u6709)  </li> <li>\u505a\u4e9b\u5c0f\u4fee\u6539\u5f8c commit master  </li> </ol>"},{"location":"Document/Publish/Example/SystemDocument/","title":"Publish document","text":""},{"location":"Document/Publish/Example/SystemDocument/#descript","title":"Descript","text":"<p>\u6b64\u6587\u4ef6\u6703\u5370\u5230\u7db2\u7ad9\u4e0a</p>"},{"location":"Document/Working/SystemDocument/","title":"AccountInbox\u6a5f\u5236\u66f4\u65b0","text":""},{"location":"Document/Working/SystemDocument/#_1","title":"\u80cc\u666f","text":"<p>2025/3/23\u6642\u767c\u751fDataCenter\u670d\u52d9\u983b\u5bec\u7528\u76e1\uff0c\u5c0e\u81f4\u7cfb\u7d71\u547c\u53ebtimeout\u3002 \u7d93\u76e4\u9ede\u5f8c\u78ba\u8a8dAccountInfo\u670d\u52d9\u6d88\u8017\u5927\u91cfDI\u5b58\u53d6\u7684\u983b\u5bec\u3002 \u56e0\u61c9\u6b64\u4e8b\u4ef6\u8207\u516c\u53f8ELK\u5c07\u65bc\u672a\u4f86\u4e0b\u67b6\uff0c\u56e0\u6b64\u76e4\u9edeAccountInfo\u7684\u4f7f\u7528\u8207\u547c\u53eb\uff0c\u4e26\u8a2d\u8a08\u512a\u5316\u6d41\u7a0b\u3002  </p>"},{"location":"Document/Working/SystemDocument/#_2","title":"\u7576\u524d\u7cfb\u7d71\u72c0\u6cc1","text":"<p>\u5b9a\u578b\u5316\u7ad9\u5167\u901a\u77e5\u4fe1(InboxType &gt; 0) \u5982\u6709\u53c3\u6578\uff0c\u5c07\u53c3\u6578\u5b58msg\u6b04\u4f4d\uff0c\u6a19\u984c\u4ee5I18N\u8cc7\u6e90\u6a94Key\u503c\u5f62\u5f0f\u5b58\u65bcTitle\u6b04\u4f4d \u5167\u6587\u8207\u6a19\u984c\u7684\u5167\u5bb9\u90fd\u7d00\u9304\u65bcI18N\u8cc7\u6e90\u6a94\u4e2d(message.en.property) *\u8a3b\u518a\u901a\u77e5\u6709\u76f4\u63a5\u5beb\u5165\u6a19\u984c\u5167\u6587\u7684\u60c5\u5883\uff0c\u9808\u76e4\u9ede  </p> <p>InboxType &lt; 0 (\u76ee\u524d\u50c5\u6709-1) \u76ee\u524d\u4e3b\u8981\u5206\u5169\u584a\u767c\u9001\uff1a\u5f8c\u53f0\u63a8\u9001\u3001\u76f4\u63a5\u547c\u53eb\u5beb\u5165\uff0cInboxType\u90fd\u6703\u5beb\u5165-1 \u5f8c\u53f0\u63a8\u9001\u6703\u5148\u751f\u6210\u4e00\u7b46Message\u8cc7\u6599\u8868\u6b04\u4f4d\uff0c\u4e26\u5728\u65b0\u589eAccountInbox\u8cc7\u6599\u6642\u5c07Message.Id\u5beb\u5165Inbox.MessageId\u6b04\u4f4d API\u76f4\u63a5\u547c\u53eb\u4e0d\u6703\u6709Inbox.MessageId\uff0c\u76ee\u524d\u50c5\u6709Luckyspin\u547c\u53eb  </p> <p>\u7d93\u76e4\u9ede\uff0c\u76ee\u524d\u73a9\u5bb6\u6709\u5169\u500b\u60c5\u5883\u6703\u589e\u52a0Inbox\u6d88\u8017\u8cc7\u6e90  </p> <ol> <li> <p>\u9ede\u64ca\u756b\u9762\u53f3\u4e0a\u89d2\u7684\u4fe1\u7bb1   \u6b64\u6642\u6703\u547c\u53eb\u6b64API     https://{{WebsiteDomainName}}/api/bt/v1/user/getInboxFromDC   \u800c\u6b64API\u4e2d\u5c07\u57f7\u884c\u4ee5\u4e0b\u64cd\u4f5c  </p> <ol> <li>\u76f4\u63a5\u5f9eDI\u6488\u53d6\u8cc7\u6599   </li> <li>\u5f9eELK\u6488\u53d6InboxId\u5c0d\u61c9\u7684MessageData \u5176\u4e2d\u4e0d\u5305\u542b\u5feb\u53d6\u6a5f\u5236\uff0c\u56e0\u6b64\u6bcf\u6b21\u9ede\u64ca\u90fd\u6703\u9020\u6210DI\u8207ELK\u7684\u8cc7\u6e90\u6d88\u8017\u3002    </li> </ol> </li> <li> <p>\u767b\u5165\u6642\u5c07\u6aa2\u67e5\u904e\u53bb\u4e00\u500b\u6708\u662f\u5426\u6709\u672a\u6536\u5230\u7684\u7cfb\u7d71MESSAGE\uff0c\u4e26\u5373\u6642\u5c07\u5167\u5bb9\u63a8\u4e0aELK  </p> </li> </ol>"},{"location":"Document/Working/SystemDocument/#_3","title":"\u7576\u524d\u8cc7\u6599\u6d41\u8207\u7d50\u69cb","text":""},{"location":"Document/Working/SystemDocument/#_4","title":"\u4e8b\u4ef6\u89f8\u767c","text":"<pre><code>graph LR\n  Trigger[\u7cfb\u7d71\u89f8\u767c\u9001Inbox&lt;br&gt;ex: \u5132\u503c\u6210\u529f] --&gt; SetType[\u6839\u64da\u89f8\u767c\u60c5\u5883\u8a2d\u7f6eInboxType] --&gt; InsertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0];</code></pre>"},{"location":"Document/Working/SystemDocument/#message","title":"\u5f8c\u53f0\u65b0\u589eMessage","text":"<pre><code>graph TB\n  NewMessage[\u5f8c\u53f0\u65b0\u589eMessage&lt;br&gt;\u767c\u9001\u985e\u5225\u70baMember] \n  --&gt; SetType[\u8a2d\u7f6eInboxType\u70ba-1] \n  --&gt; SetTitle[\u5c07Inbox.Title\u8a2d\u7f6e\u70baMessage\u6a19\u984c]\n  --&gt; Loop[\u9010\u7b46\u8655\u7406\u767c\u9001\u5c0d\u8c61] \n  --&gt; ReceiverOnline{\u6536\u4ef6\u8005\u5728\u7dda}\n  --\u662f--&gt; InsertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0] \n  --&gt; ReceiverLeft{\u9084\u6709\u6536\u4ef6\u8005}\n  --\u5426--&gt;End[\u7d50\u675f];\n\n  ReceiverOnline --\u5426--&gt; Skip[\u8df3\u904e] --&gt; ReceiverLeft;\n  ReceiverLeft--\u662f--&gt;Loop;</code></pre>"},{"location":"Document/Working/SystemDocument/#api","title":"API\u547c\u53eb","text":"<pre><code>graph TB\n  ApiCall[API\u547c\u53eb&lt;br&gt;\u76ee\u524d\u50c5\u6709LuckySpin] \n  --&gt; SetType[\u8a2d\u7f6eInboxType\u70ba-1] \n  --&gt; SetTitle[\u6839\u64daRequest\u8a2d\u7f6eTitle\u8207MSG]\n  --&gt; Loop[\u9010\u7b46\u8655\u7406\u767c\u9001\u5c0d\u8c61] \n  --&gt; InsertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0] \n  --&gt; ReceiverLeft{\u9084\u6709\u6536\u4ef6\u8005}\n  --\u5426--&gt;End[\u7d50\u675f];\n  ReceiverLeft--\u662f--&gt;Loop;</code></pre>"},{"location":"Document/Working/SystemDocument/#_5","title":"\u767b\u5165\u6642\u88dc\u9001","text":"<pre><code>graph TB\n  Login[\u767b\u5165] \n  --&gt; ReadMessage[\u6aa2\u67e5\u904e\u53bb30\u5929\u662f\u5426\u6709Message]  \n  --&gt; Loop[\u9010\u7b46\u8655\u7406Message] \n  --&gt; HasInbox{\u662f\u5426\u5df2\u5728InboxList}\n  --\u5426--&gt; SetInboxFromMessage[\u8a2d\u7f6eInboxType=-1&lt;br&gt;\u6839\u64daMessage\u8a2d\u7f6eInbox.Title, &lt;br&gt;Inbox.Message, Inbox.MessageID] \n  --&gt; InsertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0] \n  --&gt; MessageLeft{\u9084\u6709Message}\n  --\u5426--&gt;End[\u7d50\u675f];\n  MessageLeft--\u662f--&gt;Loop;\n</code></pre>"},{"location":"Document/Working/SystemDocument/#inbox","title":"\u65b0\u589eInbox","text":"<pre><code>graph TB\n  NewInbox[\u65b0\u589eInbox] --&gt; CheckType{InboxType&gt;0};\n  CheckType --&gt;|\u662f&lt;br&gt;\u4ee3\u8868\u6a23\u677f\u5316\u901a\u77e5\u4fe1| HasParameter{\u662f\u5426\u50b3\u5165\u53c3\u6578};\n  HasParameter --&gt;|\u662f| WriteMSG[Inbox.Message\u5beb\u5165Json\u5316\u7684\u53c3\u6578];\n  HasParameter --&gt;|\u5426| MSGNull[Inbox.Message\u70banull];\n  MSGNull --&gt; Template[\u6839\u64daInboxType\u627e\u51faTemplate\u5b9a\u7fa9\u6a94, \u5c07\u6a19\u984cKey\u503c\u5beb\u5165Inbox.Title];\n  WriteMSG --&gt; Template;\n  Template --&gt; End;\n\n  End--&gt; ELK_Active{\u662f\u5426\u958b\u555fELK?};\n  ELK_Active --&gt; |\u662f|WriteELK[\u5beb\u5165ELK];\n\n  CheckType --&gt; |\u5426&lt;br&gt;\u4ee3\u8868\u5ba2\u88fd\u5316\u8a0a\u606f| FromMessage{\u662f\u5426\u4f86\u81ea\u5f8c\u53f0\u63a8\u9001};\n  FromMessage --&gt; |\u662f| WriteMessageId[\u5c07\u5c0d\u61c9\u7684Message.Id\u5beb\u5165Inbox.MessageId\u6b04\u4f4d];\n  FromMessage --&gt; |\u5426| ELK_Active2{\u662f\u5426\u958b\u555fELK?};\n  WriteMessageId --&gt; ELK_Active2;\n  ELK_Active2 --&gt; |\u662f| MSGNull2[\u5c07Inbox.Message\u6b04\u4f4d\u8a2d\u70baNull&lt;br&gt;\u5beb\u5165ELK\u7684\u4fdd\u7559\u539f\u6a23];\n  ELK_Active2--&gt; |\u5426| End[\u5beb\u5165\u4e00\u7b46AccountInbox];\n  MSGNull2--&gt; End;</code></pre>"},{"location":"Document/Working/SystemDocument/#inbox_1","title":"\u8b80\u53d6Inbox","text":"<pre><code>graph TB\n  ReadInbox[\u8b80\u53d6Inbox] \n  --&gt; ReadFromDC[\u5f9eDC\u53d6Inbox\u8cc7\u6599]\n  --&gt; CheckType{InboxType&gt;0}\n  --&gt;|\u662f&lt;br&gt;\u4ee3\u8868\u6a23\u677f\u5316\u901a\u77e5\u4fe1| ReadTemplate[\u6839\u64da\u7528\u6236Language\u8207InboxType\u5f9e\u591a\u8a9e\u7cfb\u8cc7\u6e90\u6a94\u4e2d\u53d6\u5f97\u6a19\u984c\u8207\u5167\u6587]\n  --&gt; HasNSG{Inbox.Message\u6709\u503c?} \n  --&gt; |\u5426| End[\u986f\u793a\u8cc7\u6599]; \n\n  HasNSG \n  --&gt; |\u662f| FillParameter[\u5c07Inbox.Message\u5167\u5bb9\u8f49\u70ba\u5b57\u4e32\u586b\u5165\u5167\u6587]\n  --&gt; End;  \n\n  CheckType \n  --&gt;|\u5426&lt;br&gt;\u4ee3\u8868\u5ba2\u88fd\u5316\u901a\u77e5\u4fe1| EnableELK{\u662f\u5426\u555f\u7528ELK?}\n  --&gt; |\u5426| End;  \n\n  EnableELK \n  --&gt; |\u662f| ReadContentFromELK[\u5f9eELK\u53d6\u5f97Inbox.Message]\n  --&gt; End;  </code></pre>"},{"location":"Document/Working/SystemDocument/#inbox_2","title":"\u53d6Inbox\u672a\u8b80","text":"<pre><code>graph TB\n  Entry[\u53d6\u672a\u8b80];\n  CheckCache{Cache\u6709\u8cc7\u6599};\n  End[\u986f\u793a\u8cc7\u6599];  \n  QueryDB[\u5f9eDB\u6488\u53d6\u672a\u8b80\u6578];\n  QueryELK[\u5f9eELK\u6488\u53d6\u672a\u8b80\u6578];\n  WriteCache[\u5beb\u5165Cache&lt;br&gt;10\u79d2];\n  UseElk{\u555f\u7528ELK};\n\n  Entry --&gt; CheckCache;\n  CheckCache --\u662f--&gt; End;\n  CheckCache --\u5426--&gt; UseElk;\n  UseElk --\u662f--&gt; QueryELK;\n  UseElk --\u5426--&gt; QueryDB;\n  QueryDB --&gt; WriteCache;\n  QueryELK --&gt; WriteCache;\n  WriteCache --&gt; End;  </code></pre>"},{"location":"Document/Working/SystemDocument/#db-tableaccountinbox","title":"DB Table:ACCOUNTINBOX","text":"UserId InboxType Title Message MessageId A 2 msg.account_inbox.deposit.title [\"$200.00\"] -1 B 2 msg.account_inbox.deposit.title [\"\u20b9150.56\"] -1 A -1 Special Promotion! 1234 B -1 Special Promotion! 1234"},{"location":"Document/Working/SystemDocument/#elk-indexcps-account-inbox","title":"ELK Index:cps-account-inbox","text":"UserId InboxType Title Message A 2 msg.account_inbox.deposit.title [\"$200.00\"] B 2 msg.account_inbox.deposit.title [\"\u20b9150.56\"] A -1 Special Promotion! \ud83c\udfae Ready to Level Up? Join Our Epic Gaming Event! \ud83d\udd79\ufe0f Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: \ud83d\udca5 Event Dates: [Insert dates here] \ud83d\udc8e Grand Prizes: Rare skins, in-game currency, and exclusive gear! \ud83d\udd25 Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming howdown. Don\u2019t miss out\u2014your chance to win starts [insert start time]! B -1 Special Promotion! \ud83c\udfae Ready to Level Up? Join Our Epic Gaming Event! \ud83d\udd79\ufe0f Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: \ud83d\udca5 Event Dates: [Insert dates here] \ud83d\udc8e Grand Prizes: Rare skins, in-game currency, and exclusive gear! \ud83d\udd25 Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming showdown. Don\u2019t miss out\u2014your chance to win starts [insert start time]!"},{"location":"Document/Working/SystemDocument/#_6","title":"\u7576\u524d\u6548\u80fd\u554f\u984c","text":"<ol> <li>\u900f\u904e\u5f8c\u53f0\u63a8\u9001\u5927\u91cfInbox\u6642\uff0c\u63a8\u9001\u7684\u6536\u4ef6\u8005\u6bcf\u4eba\u90fd\u6703\u5728ELK\u4e0a\u4fdd\u7559\u4e00\u4efd\u76f8\u540c\u7684\u5167\u6587\u3002  </li> <li>\u8b80\u53d6\u4fe1\u4ef6\u6642\uff0c\u6703\u540c\u6642\u5230DC\u548cELK\u8b80\u53d6\uff0c\u4e26\u4e14\u4e00\u6b21\u8b80\u53d6\u5168\u6587\u51fa\u4f86\u3002</li> <li>\u67e5\u8a62\u672a\u8b80\u6578\u6642\uff0c\u53ea\u755910\u79d2\u5feb\u53d6\uff0c\u5e7e\u4e4e\u7b49\u540c\u65bc\u5ba2\u6236\u6bcf\u6b21\u9ede\u64ca\u9078\u55ae\u756b\u9762\u90fd\u6703\u9032\u884cDB\u64cd\u4f5c\u3002  </li> </ol>"},{"location":"Document/Working/SystemDocument/#_7","title":"\u6539\u5584\u65b9\u5411","text":"<ol> <li>\u8abf\u6574AccountInbox\u8cc7\u6599\u7d50\u69cb   \u5c07AccountInbox\u7684Content\u8207\u4e3b\u8868\u62c6\u958b\uff0c\u907f\u514d\u55ae\u4e00Content\u91cd\u8907\u5132\u5b58\u65bc\u6bcf\u7b46Inbox\u4e2d\u3002  </li> <li>\u6539\u5584\u8cc7\u6599\u8b80\u53d6\u6d41\u7a0b   \u5c07UnreadCount, Preview\u7b49\u5728\u9ede\u958b\u4fe1\u4ef6\u524d\u5c31\u6703\u770b\u5230\u7684\u8cc7\u6599\u55ae\u7368\u62bd\u51fa\u3002   \u9ede\u958b\u4fe1\u4ef6\u624d\u53d6Content\u3002 </li> <li>\u5efa\u7acb\u9069\u7576\u7684\u5feb\u53d6\u6a5f\u5236\u4ee5\u907f\u514d\u9020\u6210\u8cc7\u6e90\u6d88\u8017   \u8abf\u6574UnreadCount\u7684\u5feb\u53d6\u6a5f\u5236\uff0c\u4e0d\u518d\u983b\u7e41\u5f9eDB\u6216ELK\u6488\u53d6\u8cc7\u6599\u3002  </li> </ol>"},{"location":"Document/Working/SystemDocument/#_8","title":"\u65b0\u6d41\u7a0b\u8b8a\u66f4\u6982\u8981","text":"<ol> <li>\u65b0\u589eInbox Content\u8868\u8207\u5c0d\u61c9\u7684Kafka Topic\u3002  <ul> <li>Inbox Content\u5132\u5b58Title, Preview, MessageId, Countent\u7b49\u8cc7\u6599\uff0c\u4e0d\u5132\u5b58\u6536\u4ef6\u8005\u8cc7\u6599\u3002  </li> </ul> </li> <li>\u5ba2\u5236\u5316\u8a0a\u606f\u4e00\u5f8b\u5148\u5efa\u7acbContent\u3002  <ul> <li>Inbox\u5167\u53ea\u7d00\u9304Content Id\u4ee5\u5339\u914d\u8cc7\u6599\uff0c\u907f\u514d\u540c\u4e00\u8a0a\u606f\u4f54\u7528\u591a\u7b46\u8cc7\u6599\u3002  </li> </ul> </li> <li>\u53d6\u5f97\u4fe1\u4ef6\u672a\u8b80\u3001\u53d6\u5f97\u4fe1\u4ef6\u6e05\u55ae\u7684\u53d6\u8cc7\u6599\u6d41\u7a0b\u6539\u5584\u3002<ul> <li>\u672a\u8b80\u6578\u5132\u5b58\u65bcRedis\uff0c\u4e26\u76f4\u63a5\u5728\u4e8b\u4ef6\u89f8\u767c\u6642\u8abf\u6574Redis\u53c3\u6578\u3002   \u50c5\u5728Reids\u7121\u503c\u6642\u5f9eDI\u53d6\u5f97\u672a\u8b80\u6578\u5b58\u5165Redis\u3002</li> <li>\u53d6\u6e05\u55ae\u6642\u76f4\u63a5\u5f9eDI\u53d6Inbox List, \u518d\u6839\u64daContent Id\u627ePreview\u8cc7\u6599\u3002\u9ede\u958b\u4fe1\u4ef6\u6642\u624d\u53d6\u5b8c\u6574Inbox Content\u3002  </li> </ul> </li> </ol>"},{"location":"Document/Working/SystemDocument/#_9","title":"\u65b0\u6d41\u7a0b","text":""},{"location":"Document/Working/SystemDocument/#_10","title":"\u4e8b\u4ef6\u89f8\u767c","text":"<p>\u89f8\u767c\u5f8c\u8981\u6839\u64daUserId\u52a0\u7b97Redis\u672a\u8b80\u6578\u3002 \u8abf\u6574\u65bc\u89f8\u767c\u65b0\u589eInbox\u7684\u4e8b\u4ef6\u4e2d, \u907f\u514d\u547c\u53eb\u7aef\u8981\u6aa2\u67e5\u3002  </p>"},{"location":"Document/Working/SystemDocument/#message_1","title":"\u5f8c\u53f0\u65b0\u589eMessage","text":"<pre><code>graph TB\n  NewMsg[\u5f8c\u53f0\u65b0\u589eMessage&lt;br&gt;\u767c\u9001\u985e\u5225\u70baMember] \n  --&gt; SetType[\u8a2d\u7f6eInboxType\u70ba-2] \n  --&gt; NewSummary[\u6839\u64daMessage\u8a2d\u7f6eInbox Content] \n  --&gt; SetTitle[\u5c07Inbox.Title\u8a2d\u7f6e\u70baContent.Id]\n  --&gt; Loop[\u9010\u7b46\u8655\u7406\u767c\u9001\u5c0d\u8c61] \n  --&gt; Login{\u6536\u4ef6\u8005\u5728\u7dda} \n  --\u662f--&gt; InsertInbox[\u5beb\u5165Inbox] \n  --&gt; ReceiverLeft{\u9084\u6709\u6536\u4ef6\u8005}\n  --\u5426--&gt; End[\u7d50\u675f];\n\n  Login --\u5426--&gt;ReceiverLeft;\n\n  ReceiverLeft--\u662f--&gt;Loop;\n\n  style SetType fill:#997700;\n  style SetTitle fill:#997700;\n  style NewSummary fill:#997700;\n  style SetTitle fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#api_1","title":"API\u547c\u53eb","text":"<pre><code>graph TB\n  ApiCall[API\u547c\u53eb&lt;br&gt;\u76ee\u524d\u50c5\u6709LuckySpin] \n  --&gt; SetType[\u8a2d\u7f6eInboxType\u70ba-2] \n  --&gt; NewSummary[\u6839\u64daRequest\u8a2d\u7f6eInbox Content]\n  --&gt; SetTitle[\u5c07Inbox.Title\u8a2d\u7f6e\u70baContent.Id]\n  --&gt; Loop[\u9010\u7b46\u8655\u7406\u767c\u9001\u5c0d\u8c61]\n  --&gt; InesertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0] \n  --&gt; ReceiverLeft{\u9084\u6709\u6536\u4ef6\u8005}\n  --\u5426--&gt; End[\u7d50\u675f];\n\n  ReceiverLeft--\u662f--&gt;Loop;\n\n  style SetType fill:#997700;\n  style SetTitle fill:#997700;\n  style NewSummary fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#_11","title":"\u767b\u5165\u6642\u88dc\u9001","text":"<pre><code>graph TB\n  Login[\u767b\u5165] \n  --&gt; CheckMessage[\u53d6\u5f97\u904e\u53bb30\u5929\u7684Messages]  \n  --\u662f--&gt; Loop[\u9010\u7b46\u8655\u7406Message] \n  --&gt; HasInbox{\u662f\u5426\u5df2\u5728&lt;br&gt;InboxList}\n  --\u5426--&gt; HasSummary{\u662f\u5426\u5df2\u6709&lt;br&gt;Inbox Content} \n  --\u5426--&gt; SetSummary[\u8a2d\u7f6eInboxType=-2&lt;br&gt;\u6839\u64daMessage\u5efa\u7acbInbox Content] \n  --&gt; SetTitle[\u5c07Content.Id\u5beb\u5165inbox.Title]\n  --&gt; InsertInbox[\u65b0\u589eInbox&lt;br&gt;\u898b\u5f8c\u8ff0] \n  --&gt; MessageLeft{\u9084\u6709&lt;br&gt;Message}\n  --\u5426--&gt; End[\u7d50\u675f];  \n\n  HasSummary --\u662f--&gt; InsertFromSummary[\u6839\u64daContent\u65b0\u589eInbox] --&gt; InsertInbox;\n\n  HasInbox --\u662f--&gt;MessageLeft;\n  MessageLeft--\u662f--&gt;Loop;\n\n  style SetSummary fill:#997700;\n  style SetTitle fill:#997700;\n  style HasSummary fill:#997700;\n  style InsertFromSummary fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#inbox_3","title":"\u65b0\u589eInbox","text":"<pre><code>graph TB\n  NewInbox[\u65b0\u589eInbox] --&gt; CheckTpe{InboxType&gt;0}\n  --&gt;|\u662f&lt;br&gt;\u4ee3\u8868\u6a23\u677f\u5316\u901a\u77e5\u4fe1| CheckParameter{\u662f\u5426\u50b3\u5165\u53c3\u6578}\n  --&gt;|\u662f| WriteMSG[MSG\u6b04\u4f4d\u5beb\u5165Json\u5316\u7684\u53c3\u6578]\n  --&gt; Template[\u6839\u64daInboxType\u627e\u51faTemplate\u5b9a\u7fa9\u6a94, \u5c07\u6a19\u984cKey\u503c\u5beb\u5165Title\u6b04\u4f4d]\n  --&gt; End[\u5beb\u5165\u4e00\u7b46AccountInbox];\n\n  CheckParameter --&gt;|\u5426| MSGNull[MSG\u6b04\u4f4dnull]\n  --&gt; Template;\n\n  CheckTpe \n  --&gt; |\u5426&lt;br&gt;\u4ee3\u8868\u5ba2\u88fd\u5316\u8a0a\u606f| FromMessage{\u662f\u5426\u4f86\u81ea\u5f8c\u53f0\u63a8\u9001}\n  --&gt; |\u662f| WriteMessageId[\u5c07\u5c0d\u61c9\u7684Message.Id\u5beb\u5165MessageId\u6b04\u4f4d]\n  --&gt; WriteKafka[\u5c07\u8a0a\u606f\u5167\u5bb9\u5beb\u81f3Kafka\u7684Inbox Content]\n  --&gt; PrepareSummary[\u5c07\u5efa\u7acb\u597d\u7684Content.Id\u5beb\u5165Inbox.Title]\n  --&gt; End;\n\n  FromMessage --&gt; |\u5426| WriteKafka;\n\n  style PrepareSummary fill:#997700;\n  style WriteKafka fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#inbox_4","title":"\u8b80\u53d6Inbox","text":"<pre><code>graph TB\n  ReadInbox[\u8b80\u53d6Inbox] \n  --&gt; GetFromDC[\u5f9eDC\u53d6Inbox\u8cc7\u6599]\n  --&gt; isNewFlow{inboxType=-2}\n  --\u5426--&gt; CurrentFlow[\u539f\u6709\u6d41\u7a0b&lt;br&gt;\u8a73\u898b\u524d\u65b9\u6587\u4ef6] \n  --&gt; UpdateUnread --&gt; ShowData[\u986f\u793a\u8cc7\u6599];\n\n  isNewFlow --\u662f--&gt;  GetFromKafka[\u5f9eDI\u53d6Inbox Content];\n  GetFromKafka --&gt; UpdateUnread;\n\n  UpdateUnread[\u66f4\u65b0Inbox\u672a\u8b80\u8cc7\u8a0a&lt;br&gt;\u66f4\u65b0Redis\u8a08\u6578];\n\n  style isNewFlow fill:#997700;\n  style GetFromKafka fill:#997700;\n  style UpdateUnread fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#inbox_5","title":"\u53d6Inbox\u672a\u8b80","text":"<pre><code>graph TB\n  Entry[\u53d6\u672a\u8b80];\n  CheckRedis[\u4ee5UserId\u67e5\u8a62\u78ba\u8a8dRedis\u6709\u7121\u672a\u8b80\u8cc7\u6599];\n  End[\u986f\u793a\u8cc7\u6599];  \n  QueryDB[\u5f9eDB\u6488\u53d6\u672a\u8b80\u6578];\n  WriteRedis[\u5beb\u5165Redis];\n\n  Entry --&gt; CheckRedis;\n  CheckRedis --\u662f--&gt; End;\n  CheckRedis --\u5426--&gt; QueryDB;\n  QueryDB --&gt; WriteRedis;\n  WriteRedis --&gt; End;\n\n  style CheckRedis fill:#997700;\n  style QueryDB fill:#997700;\n  style WriteRedis fill:#997700;</code></pre>"},{"location":"Document/Working/SystemDocument/#_12","title":"\u65b0\u6d41\u7a0b\u8cc7\u6599\u7d50\u69cb","text":"<p>\u65b0\u6d41\u7a0b\u4e2d, DB\u8207Index\u7684\u8cc7\u6599\u7d50\u69cb\u4e00\u81f4</p>"},{"location":"Document/Working/SystemDocument/#db-table-accountinbox","title":"DB Table: ACCOUNTINBOX","text":"UserId InboxType Title Message MessageId A 2 msg.account_inbox.deposit.title [\"$200.00\"] -1 B 2 msg.account_inbox.deposit.title [\"\u20b9150.56\"] -1 A -2 fee38b64-2dd0-4771-8c53-6cd81cb1bd38 1234 B -2 fee38b64-2dd0-4771-8c53-6cd81cb1bd38 1234"},{"location":"Document/Working/SystemDocument/#kafka-topiccps-account-inbox-customize-content","title":"Kafka Topic:cps-account-inbox-customize-content","text":"Id Title Preview MessageId Content fee38b64-2dd0-4771-8c53-6cd81cb1bd38 Special Promotion! \ud83c\udfae Ready to Level Up? Join Our Epic Gaming Event! \ud83d\udd79\ufe0f 1234 \ud83c\udfae Ready to Level Up? Join Our Epic Gaming Event! \ud83d\udd79\ufe0f Gamers, assemble! It's time to dive into an unforgettable adventure during our exclusive online gaming event! From thrilling challenges to amazing rewards, there's something for everyone: \ud83d\udca5 Event Dates: [Insert dates here] \ud83d\udc8e Grand Prizes: Rare skins, in-game currency, and exclusive gear! \ud83d\udd25 Special Missions: Unlock secrets, defeat bosses, and claim your glory. Gather your squad, sharpen your skills, and get ready for action! Sign up now to secure your spot in the ultimate gaming showdown. Don\u2019t miss out\u2014your chance to win starts [insert start time]!"},{"location":"Document/Working/SystemDocument/#api_2","title":"\u63d0\u4f9bAPI","text":""},{"location":"Document/Working/SystemDocument/#list","title":"\u53d6List","text":"<p>\u898f\u683c\u9023\u7d50 \u66ff\u4ee3\u7576\u524d\u4f7f\u7528\u7684 /api/bt/v1/user/getInboxFromDC \u50b3\u5165\u50b3\u51fa\u898f\u683c\u5927\u81f4\u4e0d\u8b8a\uff0c\u53ea\u6709Message\u8b8a\u66f4\u70ba50\u5b57Preview  </p> <p>\u4e26\u65b0\u589eContentId\u6b04\u4f4d, \u5728inboxType\u70ba-2\u6642\u6703\u56de\u50b3contentId \u76f4\u63a5\u5f9eDB\u53d6\u5f97List, \u5f9eDI\u53d6\u5f97Content\u3002  </p>"},{"location":"Document/Working/SystemDocument/#inbox_6","title":"\u8b80Inbox","text":"<p>\u898f\u683c\u9023\u7d50 \u50b3\u5165inboxId\u53d6\u5f97\u5b8c\u6574inbox\u5167\u5bb9\uff0c\u4e26\u66f4\u65b0read\u3002 \u76f4\u63a5\u5f9eDB\u53d6\u5f97Inbox, \u5f9eDI\u53d6\u5f97Content\u3002</p>"},{"location":"Document/Working/SystemDocument/#api_3","title":"\u9700\u6c42API","text":""},{"location":"Document/Working/SystemDocument/#diinbox-content","title":"DI\u53d6Inbox Content","text":"<p>\u50b3\u5165\u53c3\u6578\uff1aContent Id , Content Id List , MessageId, \u8d77\u8a16\u65e5 \u56de\u50b3\uff1a\u4ee5GraphQL\u5f62\u5f0f\u56de\u50b3\u6307\u5b9a\u6b04\u4f4d, \u901a\u5e38\u70baSummary\u6216Content.  </p>"},{"location":"Document/Working/SystemDocument/#_13","title":"\u5f8c\u7e8c\u898f\u5283","text":"<p>\u4ee5\u4e0b\u6587\u4ef6\u8207\u6b64\u6b21\u9700\u6c42\u7121\u95dc\uff0c\u70ba\u76e4\u9ede\u5167\u5bb9\u6642\uff0c\u6574\u7406\u51fa\u7684\u5f8c\u7e8c\u53ef\u512a\u5316\u65b9\u5411\u3002</p> <ol> <li>\u53c3\u6578\u5316\u5ba2\u5236Inbox</li> <li>\u76f8\u95dc\u670d\u52d9&amp;API</li> <li>\u6392\u7a0b\u8655\u7406\u6a5f\u5236</li> </ol>"},{"location":"Document/Working/SystemDocument/#1-inbox","title":"1. \u53c3\u6578\u5316\u5ba2\u5236Inbox","text":"<p>\u76ee\u524d\u7684\u5ba2\u5236\u8a0a\u606f\uff0c\u4e26\u4e0d\u6703\u8655\u7406\u8b8a\u6578\uff0c\u5118\u7ba1\u662f\u91dd\u5c0d\u5927\u91cf\u53d7\u773e\u7684\u4fc3\u92b7\uff0c\u4e5f\u53ea\u662f\u767c\u540c\u6a23\u7684\u6587\u5b57\u3002 \u540c\u6642\uff0c\u5982\u679c\u8981\u91dd\u5c0d\u500b\u4eba\u767c\u9001\u6709\u5167\u5bb9\u5dee\u7570\u7684\u6587\u5b57\uff0c\u5c31\u5f97\u5efa\u7acb\u591a\u7b46 Content\u3002 \u9019\u5c0d\u7dad\u904b\u8207\u64cd\u4f5c\u4e26\u4e0d\u662f\u826f\u597d\u7684\u8a2d\u8a08\uff0c\u56e0\u6b64\u61c9\u8a72\u8981\u898f\u5283\u65b0\u7684\u53c3\u6578\u5316Inbox\u65b9\u5f0f\u3002</p> <p>\u53c3\u6578\u5316\u5ba2\u5236Inbox\uff0c\u5c07\u628a\u53c3\u6578\u4f9d\u7167{0}, {1}\u7b49\u6a23\u677fInbox\u7684\u683c\u5f0f\u5beb\u5165\u5167\u6587\uff0c\u4e26\u540c\u6a23\u9664\u5b58\u65bcAccountInbox\u7684MSG\u6b04\u4f4d\u3002 \u50b3\u9001\u53c3\u6578\u5316\u5ba2\u5236Inbox\u7684\u8cc7\u6599\u898f\u683c\u7bc4\u4f8b\u5982\u4e0b\uff1a</p>"},{"location":"Document/Working/SystemDocument/#db-table-accountinbox-elk-indexcps-account-inbox","title":"DB Table: ACCOUNTINBOX &amp; ELK Index:cps-account-inbox","text":"UserId InboxType Title Message MessageId A -2 7d61c7d0-9597-4e8d-b4c4-23bd67ef6683 [\"Jacob\",\"$200.00\"] 1234 B -2 7d61c7d0-9597-4e8d-b4c4-23bd67ef6683 [\"Ben\",\"\u20b9150.56\"] 1234"},{"location":"Document/Working/SystemDocument/#kafka-topiccps-account-inbox-customize-content_1","title":"Kafka Topic:cps-account-inbox-customize-content","text":"Id Title Preview MessageId Content 7d61c7d0-9597-4e8d-b4c4-23bd67ef6683 You've Earned a Special Reward Dear {0},Thank you for your recent purchase! We are -1 Dear {0},Thank you for your recent purchase! We are thrilled to inform you that your spending has reached {1}, qualifying you for an exclusive reward.We truly appreciate your support and look forward to providing you with even more great experiences. Please stay tuned for details on how to claim your reward.If you have any questions, feel free to reach out. Enjoy your well-earned reward!"},{"location":"Document/Working/SystemDocument/#2-api","title":"2. \u76f8\u95dc\u670d\u52d9&amp;API","text":"<p>\u6709\u4e86\u53c3\u6578\u5316\u5ba2\u5236API\u7684\u6a5f\u5236\u5f8c\uff0c\u6211\u5011\u53ef\u4ee5\u518d\u63d0\u4f9b\u66f4\u5b8c\u5584\u7684\u670d\u52d9\u3001\u66f4\u7c21\u4fbf\u5730\u5efa\u7acb\u53c3\u6578\u5316\u7684\u5ba2\u5236\u8a0a\u606f\u3002</p> <ul> <li> <p>\u5efa\u7acb\u5ba2\u88fd\u5316Inbox\u76f8\u95dcAPI   \u63d0\u4f9b\u5efa\u7acbInbox Content\u8cc7\u6599\u7684API\uff0c\u4f9b\u5f8c\u7e8c\u63a8\u9001\u4f7f\u7528\u3002\u4e5f\u5305\u542b\u914d\u5957\u7684CRUD\u3002</p> </li> <li> <p>\u5f8c\u53f0\u532f\u5165\u53c3\u6578\u5316\u540d\u55ae   \u5f8c\u53f0Message\u529f\u80fd\uff0c\u5c07\u63d0\u4f9b\u53c3\u6578\u5316\u540d\u55ae\u7684\u532f\u5165\u6a5f\u5236\u3002\u5148\u9078\u64c7\u5df2\u4e8b\u5148\u5efa\u7acb\u597d\u7684Summry\uff0c\u518d\u532f\u5165\u5305\u542bUserId\u8207\u6240\u9700\u53c3\u6578\u7684\u540d\u55ae\u3002   \u56e0\u70ba\u6309\u7167\u8eab\u4efd\u7fa4\u7d44\u9078\u64c7\u540d\u55ae\u5c07\u96e3\u4ee5\u53d6\u5f97\u53c3\u6578\uff0c\u56e0\u6b64\u53c3\u6578\u5316\u5ba2\u5236\u540d\u55ae\u61c9\u53ea\u80fd\u900f\u904e\u540d\u55ae\u532f\u5165\u7684\u65b9\u5f0f\u767c\u9001\u3002</p> </li> <li> <p>\u6279\u6b21\u63a8\u9001API \u6bd4\u7167LuckySpin\u76f8\u95dc\u7a0b\u5f0f\u5efa\u7acb\u6279\u6b21\u63a8\u9001\u7684API\uff0c\u4f46\u9808\u50b3\u5165\u4e8b\u5148\u5efa\u7acb\u597d\u7684Inbox Content.Id\uff0c\u4ee5\u53ca\u542b\u53c3\u6578\u7684\u540d\u55ae\u5217\u8868\u3002</p> </li> </ul>"},{"location":"Document/Working/SystemDocument/#3","title":"3. \u6392\u7a0b\u8655\u7406\u6a5f\u5236","text":"<p>\u5728\u5f8c\u53f0\u7684Message\u529f\u80fd\uff0c\u91dd\u5c0dInbox\u52a0\u5165\u958b\u59cb\u6642\u9593\u3002\u4e26\u5beb\u6392\u7a0b\u5728\u6307\u5b9a\u6642\u9593\u8655\u7406Inbox\u7684\u767c\u9001\u3002 \u6b64\u9805\u898f\u5283\u53ef\u4ee5\u8b93\u71df\u904b\u65b9\u5728\u4e8b\u524d\u5efa\u7acb\u63a8\u9001\u8a0a\u606f\u4e26\u65bc\u6307\u5b9a\u6642\u9593\u767c\u9001\uff0c\u4e5f\u53ef\u4ee5\u907f\u514d\u5f8c\u53f0\u4f7f\u7528\u8005\u65bc\u7cfb\u7d71\u7e41\u5fd9\u6642\u6bb5\u63a8\u9001\u5927\u91cf\u4fc3\u92b7\u8a0a\u606f\u3002</p>"},{"location":"Document/Working/SystemDocument/#_14","title":"\u4e0a\u7dda\u5f8c","text":""},{"location":"Document/Working/SystemDocument/#_15","title":"\u8cc7\u6599\u91cf\u8b8a\u5316","text":""}]}